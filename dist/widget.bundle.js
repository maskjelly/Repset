!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom/client")):"function"==typeof define&&define.amd?define(["exports","react","react-dom/client"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ChatbotWidget={},e.React,e.ReactDOMClient)}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function i(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function c(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function l(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var u={position:"fixed",bottom:"20px",right:"20px",width:"300px",height:"400px",background:"white",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",display:"flex",flexDirection:"column"},s={background:"#0070f3",color:"white",padding:"10px",textAlign:"center"},f={flex:1,padding:"10px",overflowY:"auto"},d={display:"flex",borderTop:"1px solid #ccc"},p={flex:1,padding:"10px",border:"none",outline:"none"},y={padding:"10px",border:"none",background:"#0070f3",color:"white",cursor:"pointer"},b=function(e){var n=e.apiKey,r=e.backendUrl,a=t.useState([]),b=a[0],h=a[1],g=t.useState(""),x=g[0],v=g[1];return o.default.createElement("div",{style:u},o.default.createElement("div",{style:s},"ChatBot"),o.default.createElement("div",{style:f},b.map((function(e,t){return o.default.createElement("div",{key:t,className:"chat-message ".concat(e.sender)},e.text)}))),o.default.createElement("div",{style:d},o.default.createElement("input",{type:"text",value:x,onChange:function(e){v(e.target.value)},placeholder:"Type your message...",style:p}),o.default.createElement("button",{onClick:function(){return i(void 0,void 0,void 0,(function(){var e,t;return c(this,(function(o){switch(o.label){case 0:if(!x.trim())return[2];h((function(e){return l(l([],e,!0),[{text:x,sender:"user"}],!1)})),o.label=1;case 1:return o.trys.push([1,4,5,6]),[4,fetch("".concat(r,"/chat"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({message:x})})];case 2:return[4,o.sent().json()];case 3:return e=o.sent(),h((function(t){return l(l([],t,!0),[{text:e.response,sender:"bot"}],!1)})),[3,6];case 4:return t=o.sent(),console.error("Error sending message:",t),h((function(e){return l(l([],e,!0),[{text:"Error: Unable to send message.",sender:"bot"}],!1)})),[3,6];case 5:return v(""),[7];case 6:return[2]}}))}))},style:y},"Send")))};function h(e){var t=e.containerId,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["containerId"]),i=document.getElementById(t);i?n.createRoot(i).render(o.default.createElement(b,a({},r))):console.error('Container with id "'.concat(t,'" not found.'))}"undefined"!=typeof window&&(window.ChatbotWidget={init:h}),e.initChatWidget=h,Object.defineProperty(e,"__esModule",{value:!0})}));
